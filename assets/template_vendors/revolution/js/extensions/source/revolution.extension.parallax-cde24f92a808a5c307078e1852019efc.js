(function(e){"use strict"
var r=jQuery.fn.revolution,t=r.is_mobile(),a={alias:"Parallax Min JS",name:"revolution.extensions.parallax.min.js",min_core:"5.3",version:"2.2.0"}
function i(e,r){e.lastscrolltop=r}jQuery.extend(!0,r,{checkForParallax:function(e,i){if("stop"===r.compare_version(a).check)return!1
var l=i.parallax
if(!l.done){if(l.done=!0,t&&"on"==l.disable_onmobile)return!1
"3D"!=l.type&&"3d"!=l.type||(punchgs.TweenLite.set(i.c,{overflow:l.ddd_overflow}),punchgs.TweenLite.set(i.ul,{overflow:l.ddd_overflow}),"carousel"!=i.sliderType&&"on"==l.ddd_shadow&&(i.c.prepend('<div class="dddwrappershadow"></div>'),punchgs.TweenLite.set(i.c.find(".dddwrappershadow"),{force3D:"auto",transformPerspective:1600,transformOrigin:"50% 50%",width:"100%",height:"100%",position:"absolute",top:0,left:0,zIndex:0}))),i.li.each(function(){n(jQuery(this))}),("3D"==l.type||"3d"==l.type)&&i.c.find(".tp-static-layers").length>0&&(punchgs.TweenLite.set(i.c.find(".tp-static-layers"),{top:0,left:0,width:"100%",height:"100%"}),n(i.c.find(".tp-static-layers"))),l.pcontainers=new Array,l.pcontainer_depths=new Array,l.bgcontainers=new Array,l.bgcontainer_depths=new Array,i.c.find(".tp-revslider-slidesli .slotholder, .tp-revslider-slidesli .rs-background-video-layer").each(function(){var e=jQuery(this),r=e.data("bgparallax")||i.parallax.bgparallax
void 0!==(r="on"==r?1:r)&&"off"!==r&&(l.bgcontainers.push(e),l.bgcontainer_depths.push(i.parallax.levels[parseInt(r,0)-1]/100))})
for(var o=1;o<=l.levels.length;o++)i.c.find(".rs-parallaxlevel-"+o).each(function(){var e=jQuery(this).closest(".tp-parallax-wrap")
e.data("parallaxlevel",l.levels[o-1]),e.addClass("tp-parallax-container"),l.pcontainers.push(e),l.pcontainer_depths.push(l.levels[o-1])})
"mouse"!=l.type&&"scroll+mouse"!=l.type&&"mouse+scroll"!=l.type&&"3D"!=l.type&&"3d"!=l.type||(e.mouseenter(function(r){var t=e.find(".active-revslide"),a=e.offset().top,i=e.offset().left,l=r.pageX-i,o=r.pageY-a
t.data("enterx",l),t.data("entery",o)}),e.on("mousemove.hoverdir, mouseleave.hoverdir, trigger3dpath",function(r,t){var a=t&&t.li?t.li:e.find(".active-revslide")
if("enterpoint"==l.origo){var o=e.offset().top,s=e.offset().left
null==a.data("enterx")&&a.data("enterx",r.pageX-s),null==a.data("entery")&&a.data("entery",r.pageY-o)
var n=a.data("enterx")||r.pageX-s,d=a.data("entery")||r.pageY-o,p=n-(r.pageX-s),c=d-(r.pageY-o),u=l.speed/1e3||.4}else o=e.offset().top,s=e.offset().left,p=i.conw/2-(r.pageX-s),c=i.conh/2-(r.pageY-o),u=l.speed/1e3||3
"mouseleave"==r.type&&(p=l.ddd_lasth||0,c=l.ddd_lastv||0,u=1.5)
for(var h=0;h<l.pcontainers.length;h++){var f=l.pcontainers[h],w=l.pcontainer_depths[h],v="3D"==l.type||"3d"==l.type?w/200:w/100,g=p*v,y=c*v
"scroll+mouse"==l.type||"mouse+scroll"==l.type?punchgs.TweenLite.to(f,u,{force3D:"auto",x:g,ease:punchgs.Power3.easeOut,overwrite:"all"}):punchgs.TweenLite.to(f,u,{force3D:"auto",x:g,y:y,ease:punchgs.Power3.easeOut,overwrite:"all"})}if("3D"==l.type||"3d"==l.type){var b=".tp-revslider-slidesli .dddwrapper, .dddwrappershadow, .tp-revslider-slidesli .dddwrapper-layer, .tp-static-layers .dddwrapper-layer"
"carousel"===i.sliderType&&(b=".tp-revslider-slidesli .dddwrapper, .tp-revslider-slidesli .dddwrapper-layer, .tp-static-layers .dddwrapper-layer"),i.c.find(b).each(function(){var e=jQuery(this),t=l.levels[l.levels.length-1]/200,a=p*t,o=c*t,s=0==i.conw?0:Math.round(p/i.conw*t*100)||0,n=0==i.conh?0:Math.round(c/i.conh*t*100)||0,d=e.closest("li"),h=0,f=!1
e.hasClass("dddwrapper-layer")&&(h=l.ddd_z_correction||65,f=!0),e.hasClass("dddwrapper-layer")&&(a=0,o=0),d.hasClass("active-revslide")||"carousel"!=i.sliderType?"on"!=l.ddd_bgfreeze||f?punchgs.TweenLite.to(e,u,{rotationX:n,rotationY:-s,x:a,z:h,y:o,ease:punchgs.Power3.easeOut,overwrite:"all"}):punchgs.TweenLite.to(e,.5,{force3D:"auto",rotationY:0,rotationX:0,z:0,ease:punchgs.Power3.easeOut,overwrite:"all"}):punchgs.TweenLite.to(e,.5,{force3D:"auto",rotationY:0,x:0,y:0,rotationX:0,z:0,ease:punchgs.Power3.easeOut,overwrite:"all"}),"mouseleave"==r.type&&punchgs.TweenLite.to(jQuery(this),3.8,{z:0,ease:punchgs.Power3.easeOut})})}}),t&&(window.ondeviceorientation=function(r){var t=Math.round(r.beta||0)-70,a=Math.round(r.gamma||0),o=e.find(".active-revslide")
if(jQuery(window).width()>jQuery(window).height()){var s=a
a=t,t=s}var n=e.width(),d=e.height(),p=360/n*a,c=180/d*t,u=l.speed/1e3||3,h=[]
if(o.find(".tp-parallax-container").each(function(e){h.push(jQuery(this))}),e.find(".tp-static-layers .tp-parallax-container").each(function(){h.push(jQuery(this))}),jQuery.each(h,function(){var e=jQuery(this),r=parseInt(e.data("parallaxlevel"),0)/100,t=p*r*2,a=c*r*4
punchgs.TweenLite.to(e,u,{force3D:"auto",x:t,y:a,ease:punchgs.Power3.easeOut,overwrite:"all"})}),"3D"==l.type||"3d"==l.type){var f=".tp-revslider-slidesli .dddwrapper, .dddwrappershadow, .tp-revslider-slidesli .dddwrapper-layer, .tp-static-layers .dddwrapper-layer"
"carousel"===i.sliderType&&(f=".tp-revslider-slidesli .dddwrapper, .tp-revslider-slidesli .dddwrapper-layer, .tp-static-layers .dddwrapper-layer"),i.c.find(f).each(function(){var e=jQuery(this),t=l.levels[l.levels.length-1]/200,a=p*t,o=c*t*3,s=0==i.conw?0:Math.round(p/i.conw*t*500)||0,n=0==i.conh?0:Math.round(c/i.conh*t*700)||0,d=e.closest("li"),h=0,f=!1
e.hasClass("dddwrapper-layer")&&(h=l.ddd_z_correction||65,f=!0),e.hasClass("dddwrapper-layer")&&(a=0,o=0),d.hasClass("active-revslide")||"carousel"!=i.sliderType?"on"!=l.ddd_bgfreeze||f?punchgs.TweenLite.to(e,u,{rotationX:n,rotationY:-s,x:a,z:h,y:o,ease:punchgs.Power3.easeOut,overwrite:"all"}):punchgs.TweenLite.to(e,.5,{force3D:"auto",rotationY:0,rotationX:0,z:0,ease:punchgs.Power3.easeOut,overwrite:"all"}):punchgs.TweenLite.to(e,.5,{force3D:"auto",rotationY:0,z:0,x:0,y:0,rotationX:0,ease:punchgs.Power3.easeOut,overwrite:"all"}),"mouseleave"==r.type&&punchgs.TweenLite.to(jQuery(this),3.8,{z:0,ease:punchgs.Power3.easeOut})})}}))
var s=i.scrolleffect
if(s.bgs=new Array,s.on){if("on"===s.on_slidebg)for(o=0;o<i.allslotholder.length;o++)s.bgs.push(i.allslotholder[o])
s.multiplicator_layers=parseFloat(s.multiplicator_layers),s.multiplicator=parseFloat(s.multiplicator)}void 0!==s.layers&&0===s.layers.length&&(s.layers=!1),void 0!==s.bgs&&0===s.bgs.length&&(s.bgs=!1),r.scrollTicker(i,e)}function n(e){if("3D"==l.type||"3d"==l.type){e.find(".slotholder").wrapAll('<div class="dddwrapper" style="width:100%;height:100%;position:absolute;top:0px;left:0px;overflow:hidden"></div>'),e.find(".tp-parallax-wrap").wrapAll('<div class="dddwrapper-layer" style="width:100%;height:100%;position:absolute;top:0px;left:0px;z-index:5;overflow:'+l.ddd_layer_overflow+';"></div>'),e.find(".rs-parallaxlevel-tobggroup").closest(".tp-parallax-wrap").wrapAll('<div class="dddwrapper-layertobggroup" style="position:absolute;top:0px;left:0px;z-index:50;width:100%;height:100%"></div>')
var r=e.find(".dddwrapper"),t=e.find(".dddwrapper-layer")
e.find(".dddwrapper-layertobggroup").appendTo(r),"carousel"==i.sliderType&&("on"==l.ddd_shadow&&r.addClass("dddwrappershadow"),punchgs.TweenLite.set(r,{borderRadius:i.carousel.border_radius})),punchgs.TweenLite.set(e,{overflow:"visible",transformStyle:"preserve-3d",perspective:1600}),punchgs.TweenLite.set(r,{force3D:"auto",transformOrigin:"50% 50%"}),punchgs.TweenLite.set(t,{force3D:"auto",transformOrigin:"50% 50%",zIndex:5}),punchgs.TweenLite.set(i.ul,{transformStyle:"preserve-3d",transformPerspective:1600})}}},scrollTicker:function(e,a){1!=e.scrollTicker&&(e.scrollTicker=!0,t?(punchgs.TweenLite.ticker.fps(150),punchgs.TweenLite.ticker.addEventListener("tick",function(){r.scrollHandling(e)},a,!1,1)):document.addEventListener("scroll",function(t){r.scrollHandling(e,!0)},{passive:!0})),r.scrollHandling(e,!0)},scrollHandling:function(e,a){if(e.lastwindowheight=e.lastwindowheight||window.innerHeight,e.conh=0===e.conh||void 0===e.conh?e.infullscreenmode?e.minHeight:e.c.height():e.conh,e.lastscrolltop==window.scrollY&&!e.duringslidechange&&!a)return!1
punchgs.TweenLite.delayedCall(.2,i,[e,window.scrollY])
var l=e.c[0].getBoundingClientRect(),o=e.viewPort,s=e.parallax,n=l.top<0||l.height>e.lastwindowheight?l.top/l.height:l.bottom>e.lastwindowheight?(l.bottom-e.lastwindowheight)/l.height:0
if(e.scrollproc=n,r.callBackHandling&&r.callBackHandling(e,"parallax","start"),o.enable){var d=1-Math.abs(n)
d=d<0?0:d,jQuery.isNumeric(o.visible_area)||-1!==o.visible_area.indexOf("%")&&(o.visible_area=parseInt(o.visible_area)/100),1-o.visible_area<=d?e.inviewport||(e.inviewport=!0,r.enterInViewPort(e)):e.inviewport&&(e.inviewport=!1,r.leaveViewPort(e))}if(t&&"on"==s.disable_onmobile)return!1
if("3d"!=s.type&&"3D"!=s.type){if(("scroll"==s.type||"scroll+mouse"==s.type||"mouse+scroll"==s.type)&&s.pcontainers)for(var p=0;p<s.pcontainers.length;p++)if(s.pcontainers[p].length>0){var c=s.pcontainers[p],u=s.pcontainer_depths[p]/100,h=Math.round(n*(-u*e.conh)*10)/10||0
c.data("parallaxoffset",h),punchgs.TweenLite.set(c,{overwrite:"auto",force3D:"auto",y:h})}if(s.bgcontainers)for(p=0;p<s.bgcontainers.length;p++){var f=s.bgcontainers[p]
h=n*(-s.bgcontainer_depths[p]*e.conh)||0
punchgs.TweenLite.set(f,{position:"absolute",top:"0px",left:"0px",backfaceVisibility:"hidden",force3D:"true",y:h+"px"})}}var w=e.scrolleffect
if(w.on&&("on"!==w.disable_on_mobile||!t)){var v=Math.abs(n)-w.tilt/100
if(v=v<0?0:v,!1!==w.layers){var g=1-v*w.multiplicator_layers,y={backfaceVisibility:"hidden",force3D:"true"}
if("top"==w.direction&&n>=0&&(g=1),"bottom"==w.direction&&n<=0&&(g=1),g=g>1?1:g<0?0:g,"on"===w.fade&&(y.opacity=g),"on"===w.blur){var b=(1-g)*w.maxblur
y["-webkit-filter"]="blur("+b+"px)",y.filter="blur("+b+"px)"}if("on"===w.grayscale){var x="grayscale("+100*(1-g)+"%)"
y["-webkit-filter"]=void 0===y["-webkit-filter"]?x:y["-webkit-filter"]+" "+x,y.filter=void 0===y.filter?x:y.filter+" "+x}punchgs.TweenLite.set(w.layers,y)}if(!1!==w.bgs){g=1-v*w.multiplicator,y={backfaceVisibility:"hidden",force3D:"true"}
if("top"==w.direction&&n>=0&&(g=1),"bottom"==w.direction&&n<=0&&(g=1),g=g>1?1:g<0?0:g,"on"===w.fade&&(y.opacity=g),"on"===w.blur){b=(1-g)*w.maxblur
y["-webkit-filter"]="blur("+b+"px)",y.filter="blur("+b+"px)"}if("on"===w.grayscale){x="grayscale("+100*(1-g)+"%)"
y["-webkit-filter"]=void 0===y["-webkit-filter"]?x:y["-webkit-filter"]+" "+x,y.filter=void 0===y.filter?x:y.filter+" "+x}punchgs.TweenLite.set(w.bgs,y)}}r.callBackHandling&&r.callBackHandling(e,"parallax","end")}})})(jQuery)
